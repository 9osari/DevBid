# Product & Auction 요구사항 정리

## 1. 사용자 관리
- 로그인된 사용자만 상품(경매) 등록 가능
- 사용자는 판매자/입찰자 역할

## 2. 상품(Product) 관리

### 상품 등록
- 상품명, 설명, 이미지
- 카테고리 (메인/서브)
- 상품 상태 정보

### 상품 상태
- ACTIVE (판매중)
- SOLD (판매완료)
- DELETED (삭제)
- DISABLED (숨김)

## 3. 경매(Auction) 관리

### 경매 설정
- 경매 시작가
- 경매 종료가 (reserve price?)
- 즉시낙찰가
- 경매 종료시간

### 경매 상태
- 경매전 (BEFORE_START)
- 경매중 (ONGOING)
- 경매완료 (ENDED)

## 4. 비즈니스 규칙

### 비지니스 규칙
- ~~Product ↔ Auction = 1:1 관계~~
- Product ↔ Auction = 1:N 관계 (하나의 상품은 여러 차례 경매에 등록될 수 있다)
- 동시에 활성화되는 경매는 1개만 허용 (경매가 끝나야 새로운 경매 등록 가능)
- 경매 종료 시 Product 상태와 동기화
- Product는 독립된 생명주기를 가지며, Auction은 Product를 참조하는 종속 관계

### 경매 종료 관련
- 경매 종료 임박 시 **판매자는 연장 가능**
- ~~경매 종료되면 해당 상품의 경매는 완전히 끝~~
- ~~재판매 시 판매자가 새로운 경매로 다시 등록 필요~~
- 경매 종료되면 해당 Auction은 종료 상태로 남고, Product는 그대로 유지된다
- 판매자는 동일 Product로 새로운 Auction을 생성(재경매)할 수 있다
- 재경매 시 경매 조건(시작가, 종료 시간 등)은 새로 설정된다

### 즉시낙찰
- 판매자가 즉시낙찰가 설정 시
- 구매자는 해당 가격으로 **즉시 구매 가능**
- 즉시낙찰 시 경매 **즉시 종료**

## 5. 추후 고려사항 (동시성 처리)
- 경매 연장 횟수/시간 제한
- 동시 입찰 처리
- 즉시낙찰 vs 일반 입찰 동시 처리
- 경매 연장 시 race condition

## 6. 설계 방향
- 상품 정보와 거래 로직 분리
- Product: 상품 자체 정보 관리
- Auction: 거래 방식 및 경매 로직 관리
- Product와 Auction의 생명주기를 분리 → Auction 이력은 Product에 누적
